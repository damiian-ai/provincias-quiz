<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Provincias de Argentina â€“ Juego</title>
<style>
body {
  margin: 0;
  background: #f8f8f8;
  font-family: Arial, sans-serif;
  text-align: center;
}
h1 { margin: 10px; }
svg {
  width: 90vw;
  height: 90vh;
  border: 1px solid #ccc;
  background: #fff;
}
.provincia {
  fill: #fff;
  stroke: #333;
  stroke-width: 1;
  cursor: pointer;
}
.provincia:hover {
  fill: #b3e5fc;
}
.seleccionada {
  fill: #81d4fa !important;
}
.correcta {
  fill: #4caf50 !important;
}
.incorrecta {
  fill: #f44336 !important;
}
input, button {
  padding: 8px;
  font-size: 16px;
  margin-top: 10px;
}
</style>
</head>
<body>
<h1>ðŸ‡¦ðŸ‡· Provincias de Argentina â€“ Juego</h1>
<p>1) TocÃ¡ una provincia (queda celeste). 2) EscribÃ­ su nombre. 3) Correcto = verde, incorrecto = rojo.</p>

<svg id="mapa" viewBox="0 0 800 1000"></svg>

<div>
  <input type="text" id="respuesta" placeholder="Â¿Nombre de la provincia?">
  <button onclick="comprobar()">Comprobar</button>
</div>
<p id="aciertos">Aciertos: 0/24</p>

<script src="https://unpkg.com/topojson@3"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
let seleccionada = null;
let aciertos = 0;
const mapa = d3.select("#mapa");

d3.json("https://raw.githubusercontent.com/deldersveld/topojson/master/countries/argentina/argentina-provinces.json").then(data => {
  const provincias = topojson.feature(data, data.objects.ARG_adm1).features;

  const proyeccion = d3.geoMercator().fitSize([800, 1000], {type:"FeatureCollection", features: provincias});
  const path = d3.geoPath().projection(proyeccion);

  mapa.selectAll("path")
    .data(provincias)
    .enter()
    .append("path")
    .attr("d", path)
    .attr("class", "provincia")
    .on("click", function(e, d) {
      mapa.selectAll(".provincia").classed("seleccionada", false);
      d3.select(this).classed("seleccionada", true);
      seleccionada = d;
    });
});

function comprobar() {
  if (!seleccionada) {
    alert("TocÃ¡ una provincia primero");
    return;
  }
  const respuesta = document.getElementById("respuesta").value.trim().toLowerCase();
  const nombre = seleccionada.properties.NAME_1.toLowerCase();

  if (respuesta === nombre) {
    d3.selectAll(".seleccionada").classed("correcta", true).classed("seleccionada", false);
    aciertos++;
  } else {
    d3.selectAll(".seleccionada").classed("incorrecta", true).classed("seleccionada", false);
  }
  seleccionada = null;
  document.getElementById("aciertos").innerText = `Aciertos: ${aciertos}/24`;
  document.getElementById("respuesta").value = "";
}
</script>
</body>
</html>
